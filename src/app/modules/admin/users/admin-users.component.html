<div class="admin-page">
  <header class="page-header">
    <div>
      <p class="eyebrow">Admin</p>
      <h2>Users</h2>
      <p class="subtitle">Manage users, roles, and account status.</p>
    </div>
    <div class="pill">
      Active users: {{ users.filter(u => u.status === 'ACTIVE').length }}
    </div>
  </header>

  <div class="summary-grid">
    <div class="card summary-card">
      <p>Total Users</p>
      <h3>{{ users.length }}</h3>
    </div>
    <div class="card summary-card summary-success">
      <p>Active</p>
      <h3>{{ users.filter(u => u.status === 'ACTIVE').length }}</h3>
    </div>
    <div class="card summary-card summary-muted">
      <p>Inactive</p>
      <h3>{{ users.filter(u => u.status === 'INACTIVE').length }}</h3>
    </div>
  </div>

  <div class="content-grid">
    <div class="list card">
      <div class="list-header">
        <span>Name</span>
        <span>Role</span>
        <span>Status</span>
      </div>
      <button
        class="list-row"
        *ngFor="let user of users"
        (click)="selectUser(user)">
        <span class="primary">{{ user.name }}</span>
        <span>{{ user.role }}</span>
        <span class="status" [class.active]="user.status === 'ACTIVE'">
          {{ user.status }}
        </span>
      </button>
    </div>

    <div class="card detail" *ngIf="draftUser">
      <div class="detail-header">
        <h3>Edit User</h3>
        <button class="ghost" (click)="closeCard()">âœ•</button>
      </div>

      <label>Name</label>
      <input type="text" [(ngModel)]="draftUser.name">

      <label>Email</label>
      <input type="email" [(ngModel)]="draftUser.email">

      <label>Role</label>
      <select [(ngModel)]="draftUser.role">
        <option value="BUYER">Buyer</option>
        <option value="SELLER">Seller</option>
        <option value="ADMIN">Admin</option>
      </select>

      <div class="status-row">
        <span>Status: {{ draftUser.status }}</span>
        <button class="btn-outline" (click)="toggleStatus()">
          Toggle Status
        </button>
      </div>

      <button class="btn" (click)="saveUser()">Save Changes</button>
    </div>
  </div>
</div>
